@page
@model PlanningPoker.Api.Pages.IndexModel
@{
    ViewData["Title"] = "Home";
}

<div class="home">
    <div class="welcome-section @(Model.ShowCreate || Model.ShowJoin ? "compact" : "")">
        <h1 class="main-title">Nine Card Stud</h1>
        <p class="subtitle">POKER PLANNING</p>
    </div>

    @if (!Model.ShowCreate && !Model.ShowJoin)
    {
        <div class="action-cards">
            <div class="action-card casino-card">
                <h2>Host Session</h2>
                <p>Create a new room and invite your team</p>
                <form method="post" asp-page-handler="ShowCreate">
                    <button type="submit" class="casino-button">Create Table</button>
                </form>
            </div>

            <div class="action-card casino-card">
                <h2>Join Session</h2>
                <p>Enter a PIN to join an existing table</p>
                <form method="post" asp-page-handler="ShowJoin">
                    <button type="submit" class="casino-button">Join Table</button>
                </form>
            </div>
        </div>
    }

    @if (Model.ShowCreate)
    {
        <div class="session-creator casino-card">
            <div style="width: 100%; max-width: 400px;">
                <div class="back-link">
                    <form method="post" asp-page-handler="Cancel">
                        <button type="submit" class="text-link">← BACK</button>
                    </form>
                </div>
                <h2 class="casino-title">New Session</h2>
                <form method="post" asp-page-handler="CreateSession">
                    <div class="form-group">
                        <label>Session Name</label>
                        <input type="text" asp-for="SessionName" class="casino-input" placeholder="e.g. Sprint Planning" required />
                    </div>
                    <div class="form-group" style="margin-top: 20px;">
                        <label>Your Name</label>
                        <input type="text" asp-for="ParticipantName" class="casino-input" placeholder="Enter your name" required />
                    </div>
                    @if (!string.IsNullOrEmpty(Model.ErrorMessage))
                    {
                        <div class="error-message">@Model.ErrorMessage</div>
                    }
                    <button type="submit" class="casino-button" style="width: 100%; margin-top: 30px;">Open Table</button>
                </form>
            </div>
        </div>
    }

    @if (Model.ShowJoin)
    {
        <div class="pin-entry casino-card">
            <div style="width: 100%; max-width: 400px;">
                <div class="back-link">
                    <form method="post" asp-page-handler="Cancel">
                        <button type="submit" class="text-link">← BACK</button>
                    </form>
                </div>
                <h2 class="casino-title">Enter Table PIN</h2>
                <form method="post" asp-page-handler="JoinSession">
                    <div class="form-group">
                        <label>Table PIN</label>
                        <input type="text" asp-for="Pin" class="casino-input pin-input" placeholder="000000" maxlength="6" required />
                    </div>
                    <div class="form-group" style="margin-top: 20px;">
                        <label>Your Name</label>
                        <input type="text" asp-for="ParticipantName" class="casino-input" placeholder="Enter your name" required />
                    </div>
                    @if (!string.IsNullOrEmpty(Model.ErrorMessage))
                    {
                        <div class="error-message">@Model.ErrorMessage</div>
                    }
                    <button type="submit" class="casino-button" style="width: 100%; margin-top: 30px;">Join Table</button>
                </form>
            </div>
        </div>
    }
</div>
